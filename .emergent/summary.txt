<analysis>**original_problem_statement:**
The user wants to build a mobile-first Arabic (RTL) web app named زينة وخزينة (ZEINA & KHAZINA) for gold trading and a marketplace for jewelry. The project has evolved to include deployment to Netlify (frontend) and Railway (backend).

**PRODUCT REQUIREMENTS:**
- **Tech Stack:** React + FastAPI + MongoDB.
- **Design:** A luxurious Black & Gold theme, mobile-first responsive design, and entirely in Arabic (RTL).
- **Core Features:**
    1.  **Home Page:** Display live gold prices from an external API, with correct price change calculations.
    2.  **Investment Section:** Allow users to digitally buy/sell gold.
    3.  **Store:** Split into a Jewelry Store and a Qatari Designers section.
    4.  **Gifts Section:** For sending and receiving giftable gold items.
    5.  **Admin Role:** An admin user can manage users (delete, reset password), products, and shops.
    6.  **User Self-Service:** Users can delete their own accounts from their profile.
    7.  **Authentication:** Email/Password login. Google Social Login was implemented but is currently disabled due to deployment constraints.
    8.  **Deployment:** The frontend is on Netlify, and the backend and database are on Railway.

**User's preferred language**: العربية (Arabic). The next agent MUST respond in Arabic only.

**what currently exists?**
A full-stack application with a React frontend deployed on Netlify and a FastAPI backend deployed on Railway. The backend is connected to a MongoDB instance also hosted on Railway. Most core features are implemented, including live gold prices, user/admin management, and several content pages. However, the live deployed application is currently non-functional due to persistent CORS and backend service errors.

**Last working item**:
- **Last item agent was working:** The user requested a new design for the Gifts page. The agent overwrote  with the new UI. The agent was about to add the corresponding backend endpoint to make the gift-sending feature functional.
- **Status:** IN PROGRESS
- **Agent Testing Done:** N
- **Which testing method agent to use?** Backend testing agent to create and test the new API endpoint, followed by manual testing of the full flow on the deployed site once the blocking issues are resolved.
- **User Testing Done:** N

**All Pending/In progress Issue list**:
- **Issue 1 (P0):** The deployed application is down.
- **Issue 2 (P1):** Google Social Login users are locked out.
- **Issue 3 (P2):** Incorrect price change percentage calculation.

**Issues Detail:**
- **Issue 1:** The deployed application is down
    - **Attempted fixes:** The agent has made numerous attempts to fix CORS errors by updating the  list in , moving the CORS middleware, updating the  file with the correct Node.js version, and removing private dependencies from . Despite these fixes, the live site still shows a CORS error: , and the backend API on Railway has been intermittently returning 502 (Bad Gateway) errors.
    - **Next debug checklist:**
        1.  Verify the Railway deployment logs for the backend service to confirm it is starting without errors after the latest code push.
        2.  Check the  environment variable in the Railway backend service and ensure it contains the correct Netlify URL: .
        3.  Refactor the startup event in  to be more robust, potentially moving database seeding out of the initial startup block or adding retry logic for the DB connection.
        4.  Confirm that the  command  is correct for Railway.
    - **Why fix this issue and what will be achieved with the fix?** This is a **CRITICAL BLOCKER**. The user is frustrated, and the application is unusable until this is resolved.
    - **Status:** IN PROGRESS
    - **Is recurring issue?** Y
    - **Should Test frontend/backend/both after fix?** Both.
    - **Blocked on other issue:** This issue blocks all other progress.

- **Issue 2:** Google Social Login users are locked out
    - **Attempted fixes:** The agent hid the Login with Google button as a temporary workaround. This does not solve the root problem for existing users.
    - **Next debug checklist:**
        1.  Use the newly added admin features (Delete User, Reset Password) to manually help users who are locked out of their Google-linked accounts.
        2.  Discuss with the user about permanently removing Google Login or implementing a standard OAuth2 flow that doesn't depend on Emergent's infrastructure (this would require the user to create credentials in Google Cloud).
    - **Why fix this issue and what will be achieved with the fix?** To restore account access for existing users and finalize the app's authentication strategy.
    - **Status:** NOT STARTED
    - **Is recurring issue?** N
    - **Should Test frontend/backend/both after fix?** Backend.
    - **Blocked on other issue:** Issue 1.

- **Issue 3:** Incorrect price change percentage calculation
    - **Attempted fixes:** The agent modified the  function in  to add a simulated random change because the previous value was not being stored or retrieved correctly.
    - **Next debug checklist:**
        1.  Modify  to store the previous prices in a global variable or a dedicated cache/DB collection.
        2.  Calculate the percentage change based on the actual last known price, not a random value.
    - **Why fix this issue and what will be achieved with the fix?** To provide users with accurate and meaningful data on gold price fluctuations.
    - **Status:** NOT STARTED
    - **Is recurring issue?** N
    - **Should Test frontend/backend/both after fix?** Backend.
    - **Blocked on other issue:** Issue 1.

**In progress Task List**:
- **Task 1:** Implement Backend for Gift Vouchers
    - **Where to resume:** Create a new API endpoint () and a corresponding Pydantic model in . This endpoint will handle the form submission from the newly designed .
    - **What will be achieved with this?** The Gifts feature will be fully functional.
    - **Status:** IN PROGRESS
    - **Should Test frontend/backend/both after fix?** Both.
    - **Blocked on something:** Issue 1.

**Upcoming and Future Tasks**
- **Upcoming Tasks:**
    - **P1: Verify Admin User Management:** Test the Delete User and Reset Password functionalities in the admin panel on the deployed application.
    - **P2: Test User Account Deletion:** Verify that the Delete Account button in the user's profile works correctly and removes all associated user data.
- **Future Tasks:**
    - **P2: Full Payment Gateway Integration:** Replace mocked payment UIs.
    - **P3: Implement Standard Google OAuth:** If the user wishes, replace the disabled Google Login with a standard implementation.

**Completed work in this session**
- **Deployment:** Guided the user to deploy the frontend to Netlify and the backend/database to Railway.
- **Deployment Fixes:** Addressed multiple deployment-related issues, including ESLint build errors, Node.js version conflicts, and private package dependencies.
- **CORS Resolution:** Implemented and repeatedly refined the CORS configuration in the FastAPI backend to handle requests from the deployed frontend.
- **Database Migration:** Migrated the database from a local instance to the user's MongoDB Atlas, and then to a Railway-hosted MongoDB instance as a workaround for persistent Atlas SSL issues.
- **Live Gold Prices:** Integrated a working third-party API for live gold prices and corrected the calculation logic.
- **User Management Features:**
    - Added Delete User and Reset Password functions to the admin panel.
    - Added a Delete Account feature for users in their profile.
- **UI/UX Enhancements:**
    - Integrated the official app logo into the header, auth page, and as the favicon.
    - Redesigned the Gifts page per the user's request.
    - Created About, Sharia, and Received Gift pages.
    - Created a  file documenting the application's architecture.
    - Renamed Store to المجوهرات (Jewelry) in the navigation bar.

**Code Architecture**


**Key Technical Concepts**
- **Frontend:** React, Tailwind CSS (deployed on Netlify)
- **Backend:** FastAPI (deployed on Railway)
- **Database:** MongoDB (deployed on Railway)
- **Deployment Architecture:** Decoupled frontend/backend services hosted on separate platforms (Netlify/Railway).

**key DB schema**
- **users, products, designers, cart, orders, wallets, notifications, password_resets, gifts** (implicitly defined in Pydantic models in )

**All files of reference**
- **/app/backend/server.py**: Contains all backend logic. The CORS configuration is at the top, immediately after .
- **/app/frontend/netlify.toml**: Netlify config, sets build command () and Node.js version ().
- **/app/backend/Procfile**: Railway start command: .
- **/app/frontend/src/pages/GiftsPage.js**: Overwritten with a new design, awaiting backend logic.
- **/app/frontend/src/pages/AdminUsersPage.js**: Contains new UI for deleting users and resetting passwords.
- **/app/frontend/src/pages/ProfilePage.js**: Contains new UI for self-service account deletion.

**Areas that need refactoring**:
- The  file is extremely large and difficult to maintain. It should be broken down into a modular structure (e.g., routers, models, services).

**key api endpoints**
- 
- 
- 
-  (To be implemented)

**Critical Info for New Agent**
- **THE DEPLOYED APP IS DOWN.** Your absolute first priority is to fix the live application. The user is very frustrated (). Focus all efforts on resolving the CORS/502 errors between Netlify and Railway.
- The application's infrastructure is spread across Netlify (frontend) and Railway (backend + database). Do not assume a local environment works the same as production.
- The database is a MongoDB instance on Railway, NOT the user's Atlas account. Connection details are in Railway's environment variables.
- Google Login is intentionally disabled. Do not try to fix it. The current solution for locked-out users is manual admin intervention (delete/reset password).

**documents and test reports created in this job**
- 

**Last 10 User Messages and any pending HUMAN messages**
1.  **User (LATEST):** Still getting the same CORS error on the live app and is extremely frustrated.
2.  **User:** Asks if the problem will be solved after the agent's latest fix for Railway startup logs.
3.  **User:** Provided a screenshot of the Railway MongoDB connection string.
4.  **User:** Provided a screenshot of Railway logs showing a 502 error.
5.  **User:** Shared the new Netlify URL ().
6.  **User:** States that the price change percentages are not correct.
7.  **User:** After deploying, reports a CORS error on the live Netlify app, and that the Railway backend URL is .
8.  **User:** Confirms the  is .
9.  **User:** After getting an  build error on Railway, confirms they saved to GitHub.
10. **User:** Reports a build failure on Railway due to the private  package.

**Project Health Check:**
- **Broken:** The entire live application is non-functional due to a critical CORS/backend error. Login, data fetching, and all other features are failing on the deployed version.
- **Mocked:**
    - Password reset emails are not sent (placeholder API key).
    - Google Social Login is disabled.
    - Gold price change percentage is a random simulation.

**3rd Party Integrations**
- **Netlify:** Frontend hosting.
- **Railway:** Backend and Database hosting.
- **Metals-API / goldprice.org (via custom code):** Live gold prices.
- **Resend:** Planned for emails, but using a placeholder key.

**Testing status**
- **Testing agent used after significant changes:** YES
- **Troubleshoot agent used after agent stuck in loop:** NO
- **Test files created:**  (by testing agent)
- **Known regressions:** The entire deployed application is in a broken state.

**Credentials to test flow:**
- **Admin Email:** 
- **Admin Password:** 

**What agent forgot to execute**
- The agent has not been able to stabilize the deployed environment. Despite multiple fixes, the core issue of the backend service on Railway failing or being misconfigured persists, leading to the CORS errors seen on the frontend.
- The agent has not yet implemented the backend logic for the redesigned Gifts page.</analysis>
