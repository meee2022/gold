# 🏆 زينة وخزينة - مخطط التدفق (Flow Chart)

## 📱 نظرة عامة على التطبيق

```
┌─────────────────────────────────────────────────────────────────┐
│                      زينة وخزينة                                 │
│              تطبيق تداول الذهب والمجوهرات في قطر                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔐 1. تدفق المصادقة (Authentication Flow)

```
                    ┌──────────────┐
                    │  فتح التطبيق  │
                    └──────┬───────┘
                           │
                           ▼
                ┌─────────────────────┐
                │  هل المستخدم مسجل؟  │
                └──────────┬──────────┘
                           │
              ┌────────────┴────────────┐
              │                         │
              ▼                         ▼
        ┌─────────┐              ┌─────────────┐
        │   نعم   │              │     لا      │
        └────┬────┘              └──────┬──────┘
             │                          │
             ▼                          ▼
    ┌─────────────────┐       ┌──────────────────┐
    │ الصفحة الرئيسية │       │ صفحة تسجيل الدخول │
    └─────────────────┘       └────────┬─────────┘
                                       │
                          ┌────────────┴────────────┐
                          │                         │
                          ▼                         ▼
                   ┌────────────┐          ┌──────────────┐
                   │ تسجيل دخول │          │ إنشاء حساب  │
                   └─────┬──────┘          └──────┬───────┘
                         │                        │
                         ▼                        ▼
                   ┌────────────┐          ┌──────────────┐
                   │ أدخل البريد │          │ أدخل الاسم   │
                   │ وكلمة المرور│          │ البريد+كلمة │
                   └─────┬──────┘          │   المرور    │
                         │                 └──────┬───────┘
                         │                        │
                         └────────────┬───────────┘
                                      │
                                      ▼
                              ┌──────────────┐
                              │ التحقق من   │
                              │ البيانات    │
                              └──────┬───────┘
                                     │
                        ┌────────────┴────────────┐
                        │                         │
                        ▼                         ▼
                  ┌──────────┐             ┌──────────┐
                  │  نجاح ✅  │             │  فشل ❌  │
                  └─────┬────┘             └─────┬────┘
                        │                        │
                        ▼                        ▼
               ┌─────────────────┐      ┌──────────────────┐
               │ الصفحة الرئيسية │      │ عرض رسالة الخطأ  │
               └─────────────────┘      └──────────────────┘
```

---

## 🏠 2. تدفق الصفحة الرئيسية (Home Page Flow)

```
                    ┌─────────────────┐
                    │ الصفحة الرئيسية │
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
         ▼                   ▼                   ▼
┌─────────────────┐  ┌──────────────┐  ┌──────────────────┐
│ أسعار الذهب     │  │ بانر إعلاني  │  │ الوصول السريع    │
│ (تحديث كل 5 دق) │  │              │  │                  │
└────────┬────────┘  └──────────────┘  └────────┬─────────┘
         │                                       │
         ▼                           ┌───────────┼───────────┬───────────┐
┌─────────────────┐                  │           │           │           │
│ عرض 4 عيارات:   │                  ▼           ▼           ▼           ▼
│ • عيار 24      │           ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐
│ • عيار 22      │           │الاستثمار │ │المجوهرات │ │ الهدايا  │ │المصممات │
│ • عيار 21      │           └────┬─────┘ └────┬─────┘ └────┬─────┘ └────┬─────┘
│ • عيار 18      │                │            │            │            │
└─────────────────┘                ▼            ▼            ▼            ▼
                           ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐
                           │صفحة      │ │صفحة      │ │صفحة      │ │صفحة      │
                           │الاستثمار │ │المجوهرات │ │الهدايا   │ │المصممات  │
                           └──────────┘ └──────────┘ └──────────┘ └──────────┘
```

---

## 💰 3. تدفق الاستثمار (Investment Flow)

```
                    ┌──────────────────┐
                    │  صفحة الاستثمار  │
                    └────────┬─────────┘
                             │
                             ▼
                    ┌──────────────────┐
                    │ عرض أسعار الذهب  │
                    │   الحية         │
                    └────────┬─────────┘
                             │
                             ▼
                    ┌──────────────────┐
                    │  حاسبة الذهب    │
                    └────────┬─────────┘
                             │
         ┌───────────────────┴───────────────────┐
         │                                       │
         ▼                                       ▼
┌─────────────────┐                    ┌─────────────────┐
│  اختيار العيار  │                    │  إدخال الوزن   │
│ (24/22/21/18)   │                    │   بالجرام      │
└────────┬────────┘                    └────────┬────────┘
         │                                      │
         └───────────────────┬──────────────────┘
                             │
                             ▼
                    ┌──────────────────┐
                    │ حساب القيمة      │
                    │ = الوزن × السعر  │
                    └────────┬─────────┘
                             │
                             ▼
                    ┌──────────────────┐
                    │  هل تريد شراء؟   │
                    └────────┬─────────┘
                             │
              ┌──────────────┴──────────────┐
              │                             │
              ▼                             ▼
        ┌──────────┐                  ┌──────────┐
        │   نعم   │                  │    لا    │
        └────┬─────┘                  └────┬─────┘
             │                             │
             ▼                             ▼
    ┌─────────────────┐           ┌─────────────────┐
    │ هل وافق على     │           │  العودة للخلف   │
    │ الشروط الشرعية؟ │           └─────────────────┘
    └────────┬────────┘
             │
    ┌────────┴────────┐
    │                 │
    ▼                 ▼
┌────────┐      ┌──────────┐
│  نعم   │      │   لا     │
└───┬────┘      └────┬─────┘
    │                │
    ▼                ▼
┌─────────────┐  ┌──────────────┐
│إضافة للسلة │  │صفحة الشريعة │
└─────────────┘  └──────────────┘
```

---

## 🛒 4. تدفق سلة التسوق (Shopping Cart Flow)

```
                    ┌──────────────┐
                    │  سلة التسوق  │
                    └──────┬───────┘
                           │
                           ▼
                    ┌──────────────┐
                    │ هل السلة     │
                    │   فارغة؟     │
                    └──────┬───────┘
                           │
              ┌────────────┴────────────┐
              │                         │
              ▼                         ▼
        ┌──────────┐              ┌──────────┐
        │   نعم   │              │    لا    │
        └────┬─────┘              └────┬─────┘
             │                         │
             ▼                         ▼
    ┌─────────────────┐       ┌─────────────────┐
    │ عرض رسالة      │       │ عرض المنتجات    │
    │ "السلة فارغة"  │       │ في السلة        │
    └─────────────────┘       └────────┬────────┘
                                       │
                           ┌───────────┴───────────┐
                           │                       │
                           ▼                       ▼
                    ┌──────────────┐       ┌──────────────┐
                    │ تعديل الكمية │       │  حذف منتج   │
                    └──────┬───────┘       └──────┬───────┘
                           │                      │
                           └──────────┬───────────┘
                                      │
                                      ▼
                              ┌──────────────┐
                              │ حساب المجموع │
                              └──────┬───────┘
                                     │
                                     ▼
                              ┌──────────────┐
                              │ إتمام الشراء │
                              └──────┬───────┘
                                     │
                                     ▼
                              ┌──────────────┐
                              │   الدفع     │
                              └──────────────┘
```

---

## 🎁 5. تدفق الهدايا (Gifts Flow)

```
                    ┌──────────────┐
                    │ صفحة الهدايا │
                    └──────┬───────┘
                           │
         ┌─────────────────┴─────────────────┐
         │                                   │
         ▼                                   ▼
┌─────────────────┐                 ┌─────────────────┐
│  إرسال هدية    │                 │ استلام هدية    │
└────────┬────────┘                 └────────┬────────┘
         │                                   │
         ▼                                   ▼
┌─────────────────┐                 ┌─────────────────┐
│ اختيار المنتج  │                 │ عرض تفاصيل     │
│ أو سبيكة ذهب   │                 │ الهدية         │
└────────┬────────┘                 └────────┬────────┘
         │                                   │
         ▼                                   │
┌─────────────────┐                 ┌────────┴────────┐
│ اختيار الوزن   │                 │                 │
│ والعيار        │                 ▼                 ▼
└────────┬────────┘         ┌──────────┐     ┌──────────┐
         │                  │  بيع    │     │إعادة     │
         ▼                  │ وتحويل  │     │ إهداء    │
┌─────────────────┐         │  نقدي   │     └──────────┘
│ إدخال رسالة    │         └──────────┘
│ التهنئة        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ إدخال بيانات   │
│ المستلم        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│    الدفع       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ إرسال الهدية ✅ │
└─────────────────┘
```

---

## 👑 6. تدفق لوحة التحكم (Admin Flow)

```
                    ┌──────────────────┐
                    │  لوحة التحكم    │
                    │ (Admin فقط)     │
                    └────────┬─────────┘
                             │
     ┌───────────┬───────────┼───────────┬───────────┐
     │           │           │           │           │
     ▼           ▼           ▼           ▼           ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│المستخدمين│ │المنتجات │ │المتاجر  │ │المصممات │ │الطلبات  │
└────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘
     │           │           │           │           │
     ▼           ▼           ▼           ▼           ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│• عرض   │ │• إضافة │ │• إضافة │ │• إضافة │ │• عرض   │
│• حذف   │ │• تعديل │ │• تعديل │ │• تعديل │ │• تحديث │
│• تغيير │ │• حذف   │ │• حذف   │ │• حذف   │ │ الحالة │
│ كلمة   │ │• تفعيل │ │• تفعيل │ │• تفعيل │ │        │
│ المرور │ │        │ │        │ │        │ │        │
│• حظر   │ │        │ │        │ │        │ │        │
└─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘
```

---

## 🔄 7. تدفق تحديث أسعار الذهب (Gold Price Update Flow)

```
┌─────────────────────────────────────────────────────────────┐
│                   تحديث أسعار الذهب                          │
│                  (Background Task)                          │
└─────────────────────────────────────────────────────────────┘

        ┌──────────────┐
        │    البداية   │
        └──────┬───────┘
               │
               ▼
        ┌──────────────┐
        │ كل 5 دقائق  │◄────────────────────────┐
        └──────┬───────┘                        │
               │                                │
               ▼                                │
        ┌──────────────┐                        │
        │ جلب السعر من │                        │
        │ goldprice.org│                        │
        └──────┬───────┘                        │
               │                                │
      ┌────────┴────────┐                       │
      │                 │                       │
      ▼                 ▼                       │
┌──────────┐      ┌──────────┐                  │
│  نجاح ✅ │      │  فشل ❌  │                  │
└────┬─────┘      └────┬─────┘                  │
     │                 │                        │
     ▼                 ▼                        │
┌──────────────┐ ┌──────────────┐               │
│حساب الأسعار │ │استخدام آخر  │               │
│للعيارات     │ │سعر محفوظ    │               │
│المختلفة     │ └──────────────┘               │
└──────┬───────┘                                │
       │                                        │
       ▼                                        │
┌──────────────┐                                │
│حفظ في قاعدة │                                │
│ البيانات    │                                │
└──────┬───────┘                                │
       │                                        │
       ▼                                        │
┌──────────────┐                                │
│فحص تنبيهات  │                                │
│ الأسعار     │                                │
└──────┬───────┘                                │
       │                                        │
       ▼                                        │
┌──────────────┐                                │
│انتظار 5 دق  │────────────────────────────────┘
└──────────────┘
```

---

## 🗄️ 8. هيكل قاعدة البيانات (Database Schema)

```
┌─────────────────────────────────────────────────────────────┐
│                     MongoDB Collections                      │
└─────────────────────────────────────────────────────────────┘

┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│    users     │    │   products   │    │  gold_prices │
├──────────────┤    ├──────────────┤    ├──────────────┤
│ user_id      │    │ product_id   │    │ karat        │
│ name         │    │ title        │    │ price_per_   │
│ email        │    │ price_qar    │    │   gram_qar   │
│ password_hash│    │ karat        │    │ change_amount│
│ role         │    │ type         │    │ change_%     │
│ picture      │    │ image_url    │    │ updated_at   │
│ is_blocked   │    │ merchant_name│    └──────────────┘
│ created_at   │    │ is_active    │
└──────────────┘    └──────────────┘

┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   designers  │    │    orders    │    │     cart     │
├──────────────┤    ├──────────────┤    ├──────────────┤
│ designer_id  │    │ order_id     │    │ user_id      │
│ name         │    │ user_id      │    │ items[]      │
│ brand        │    │ items[]      │    │  - product_id│
│ bio          │    │ total_qar    │    │  - quantity  │
│ image_url    │    │ status       │    │ updated_at   │
│ specialty    │    │ created_at   │    └──────────────┘
│ is_active    │    └──────────────┘
└──────────────┘

┌──────────────┐    ┌──────────────┐
│ notifications│    │ price_alerts │
├──────────────┤    ├──────────────┤
│ notification_│    │ alert_id     │
│   id         │    │ user_id      │
│ user_id      │    │ karat        │
│ type         │    │ target_price │
│ title        │    │ alert_type   │
│ message      │    │ triggered    │
│ read         │    │ created_at   │
│ created_at   │    └──────────────┘
└──────────────┘
```

---

## 🌐 9. هيكل API (API Structure)

```
┌─────────────────────────────────────────────────────────────┐
│                      API Endpoints                           │
└─────────────────────────────────────────────────────────────┘

/api
├── /auth
│   ├── POST /login          → تسجيل الدخول
│   ├── POST /register       → إنشاء حساب
│   ├── POST /logout         → تسجيل الخروج
│   ├── POST /forgot-password→ نسيت كلمة المرور
│   └── POST /reset-password → إعادة تعيين كلمة المرور
│
├── /gold-prices
│   └── GET /                → جلب أسعار الذهب
│
├── /products
│   └── GET /                → جلب المنتجات
│
├── /designers
│   └── GET /                → جلب المصممات
│
├── /cart
│   ├── GET /                → جلب السلة
│   ├── POST /add            → إضافة للسلة
│   └── DELETE /:id          → حذف من السلة
│
├── /notifications
│   ├── GET /                → جلب الإشعارات
│   └── PUT /:id/read        → تحديد كمقروء
│
├── /price-alerts
│   ├── GET /                → جلب التنبيهات
│   ├── POST /               → إنشاء تنبيه
│   └── DELETE /:id          → حذف تنبيه
│
└── /admin (للمسؤولين فقط)
    ├── /users               → إدارة المستخدمين
    ├── /products            → إدارة المنتجات
    ├── /shops               → إدارة المتاجر
    └── /designers           → إدارة المصممات
```

---

## 📱 10. شريط التنقل السفلي (Bottom Navigation)

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  🏠          💰          👛          🎁          💎         │
│ الرئيسية   الاستثمار    المحفظة    الهدايا    المجوهرات   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 📄 تم إنشاء هذا المخطط لتطبيق زينة وخزينة
## 🗓️ التاريخ: 2024
## 🔗 الرابط: https://goldqatar1.netlify.app
